/*â–“â–ˆâ–ˆ â–ˆâ–ˆâ–“ â–„â–„â–„ â–ˆâ–ˆ â–„â–ˆâ–€â–„â–„â–„
 â–’â–ˆâ–ˆ â–ˆâ–ˆâ–’â–’â–ˆâ–ˆâ–ˆâ–ˆâ–„ â–ˆâ–ˆâ–„â–ˆâ–’â–’â–ˆâ–ˆâ–ˆâ–ˆâ–„
 â–’â–ˆâ–ˆ â–ˆâ–ˆâ–‘â–’â–ˆâ–ˆ â–€â–ˆâ–„ â–“â–ˆâ–ˆâ–ˆâ–„â–‘â–’â–ˆâ–ˆ â–€â–ˆâ–„
 â–‘ â–â–ˆâ–ˆâ–“â–‘â–‘â–ˆâ–ˆâ–„â–„â–„â–„â–ˆâ–ˆ â–“â–ˆâ–ˆ â–ˆâ–„â–‘â–ˆâ–ˆâ–„â–„â–„â–„â–ˆâ–ˆ
 â–‘ â–ˆâ–ˆâ–’â–“â–‘ â–“â–ˆ â–“â–ˆâ–ˆâ–’â–’â–ˆâ–ˆâ–’ â–ˆâ–„â–“â–ˆ â–“â–ˆâ–ˆâ–’
 â–ˆâ–ˆâ–’â–’â–’ â–’â–’ â–“â–’â–ˆâ–‘â–’ â–’â–’ â–“â–’â–’â–’ â–“â–’â–ˆâ–‘
 â–“â–ˆâ–ˆ â–‘â–’â–‘ â–’ â–’â–’ â–‘â–‘ â–‘â–’ â–’â–‘ â–’ â–’â–’ â–‘
 â–’ â–’ â–‘â–‘ â–‘ â–’ â–‘ â–‘â–‘ â–‘ â–‘ â–’
 â–‘ â–‘ â–‘ â–‘â–‘ â–‘ â–‘ â–‘
 â–‘ â–‘
OlÃ¡,
Obrigado por usar o bot Yaka.
Eu sou,
â–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—
â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘
 â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘
 â•šâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘
 â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘
 â•šâ•â• â•šâ•â• â•šâ•â•â•šâ•â• â•šâ•â•â•šâ•â• â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â• â•šâ•â•â•šâ•â•
 */

require("dotenv").config();

let gg = process.env.MODS;
if (!gg) {
    gg = "6584660212"; // VocÃª pode mudar este nÃºmero //
}

// -------------------------------------------------------------- //
global.owner = gg.split(",");

// SEM MONGODB - SISTEMA LOCAL ULTRA RÃPIDO
global.mongodb = ""; // Vazio = sem MongoDB
global.mongodbUrl = ""; // Vazio = sem MongoDB
global.useLocalDB = true; // Usar sistema local

global.sessionId = process.env.SESSION_ID || "ok";
global.prefa = process.env.PREFIX || ".";
global.tenorApiKey = process.env.TENOR_API_KEY || "AIzaSyCAYZ930Rq1EFiRNRJuSeGGrKljCnOb8-U";
global.packname = process.env.PACKNAME || `ğŸ‘¹ ğ•ğ•’ğ•œğ•’áµáµˆ`;
global.author = process.env.AUTHOR || "por: ğ–„ğ–†ğ–ğ–†ğ–˜ğ–ğ–";
global.port = process.env.PORT || "3000";

// CACHE LOCAL ULTRA RÃPIDO (substitui MongoDB)
global.cache = {
    botSwitch: new Map(), // Liga/desliga bot por grupo
    chatbot: new Map(),   // Chatbot por grupo
    nsfw: new Map(),      // NSFW por grupo
    banned: new Map(),    // UsuÃ¡rios banidos
    settings: new Map(),  // ConfiguraÃ§Ãµes gerais
    antilink: new Map()   // Antilink por grupo
};

// SISTEMA DE PERSISTÃŠNCIA SIMPLES (salva em arquivo)
const fs = require('fs');
const path = require('path');
const CACHE_FILE = path.join(__dirname, 'bot_cache.json');

// Carregar cache do arquivo
global.loadCache = () => {
    try {
        if (fs.existsSync(CACHE_FILE)) {
            const data = JSON.parse(fs.readFileSync(CACHE_FILE, 'utf8'));
            
            // Converter objetos de volta para Maps
            if (data.botSwitch) global.cache.botSwitch = new Map(Object.entries(data.botSwitch));
            if (data.chatbot) global.cache.chatbot = new Map(Object.entries(data.chatbot));
            if (data.nsfw) global.cache.nsfw = new Map(Object.entries(data.nsfw));
            if (data.banned) global.cache.banned = new Map(Object.entries(data.banned));
            if (data.settings) global.cache.settings = new Map(Object.entries(data.settings));
            if (data.antilink) global.cache.antilink = new Map(Object.entries(data.antilink));
            
            console.log("âœ… Cache local carregado!");
        }
    } catch (e) {
        console.log("âš ï¸ Erro ao carregar cache, usando padrÃ£o");
    }
};

// Salvar cache no arquivo
global.saveCache = () => {
    try {
        const data = {
            botSwitch: Object.fromEntries(global.cache.botSwitch),
            chatbot: Object.fromEntries(global.cache.chatbot),
            nsfw: Object.fromEntries(global.cache.nsfw),
            banned: Object.fromEntries(global.cache.banned),
            settings: Object.fromEntries(global.cache.settings),
            antilink: Object.fromEntries(global.cache.antilink)
        };
        
        fs.writeFileSync(CACHE_FILE, JSON.stringify(data, null, 2));
    } catch (e) {
        console.log("âš ï¸ Erro ao salvar cache");
    }
};

// FUNÃ‡Ã•ES ULTRA RÃPIDAS (substituem MongoDB)
global.db = {
    // Bot Switch (liga/desliga bot por grupo)
    getBotSwitch: (chatId) => {
        return global.cache.botSwitch.get(chatId) !== false; // Default: true
    },
    
    setBotSwitch: async (chatId, value) => {
        global.cache.botSwitch.set(chatId, value);
        global.saveCache();
        return true;
    },
    
    // Chatbot
    getChatbot: (chatId) => {
        return global.cache.chatbot.get(chatId) || false; // Default: false
    },
    
    setChatbot: async (chatId, value) => {
        global.cache.chatbot.set(chatId, value);
        global.saveCache();
        return true;
    },
    
    // NSFW
    getNSFW: (chatId) => {
        return global.cache.nsfw.get(chatId) || false; // Default: false
    },
    
    setNSFW: async (chatId, value) => {
        global.cache.nsfw.set(chatId, value);
        global.saveCache();
        return true;
    },
    
    // Sistema de Ban
    getBanned: (userId) => {
        return global.cache.banned.get(userId) || false; // Default: false
    },
    
    setBanned: async (userId, value) => {
        global.cache.banned.set(userId, value);
        global.saveCache();
        return true;
    },
    
    // Antilink
    getAntilink: (chatId) => {
        return global.cache.antilink.get(chatId) || false; // Default: false
    },
    
    setAntilink: async (chatId, value) => {
        global.cache.antilink.set(chatId, value);
        global.saveCache();
        return true;
    },
    
    // ConfiguraÃ§Ãµes gerais
    getSetting: (key) => {
        return global.cache.settings.get(key);
    },
    
    setSetting: async (key, value) => {
        global.cache.settings.set(key, value);
        global.saveCache();
        return true;
    }
};

// Carregar cache na inicializaÃ§Ã£o
global.loadCache();

// Salvar cache a cada 5 minutos
setInterval(global.saveCache, 5 * 60 * 1000);

// CONFIGURAÃ‡Ã•ES DE VELOCIDADE
global.fastMode = true;
global.quickResponse = true;
global.localMode = true;

console.log("ğŸš€ Sistema local ativado - ULTRA RÃPIDO!");

module.exports = {
    mongodb: global.mongodb,
};

// ---------------------NÃ£o Modifique esta parte------------------- //
global.mess = {
    jobdone: "âœ… Tarefa concluÃ­da!",
    useradmin: "âŒ Apenas *Administradores* podem usar este comando!",
    botadmin: "âŒ Preciso ser *Administrador* para executar este comando!",
    botowner: "âŒ Apenas meu *Dono* pode usar este comando!",
    grouponly: "âŒ Este comando Ã© apenas para *Grupos*!",
    privateonly: "âŒ Este comando Ã© apenas para *Chat Privado*!",
    botonly: "âŒ Apenas o prÃ³prio *Bot* pode usar este comando!",
    waiting: "â³ Processando...",
    nolink: "âŒ ForneÃ§a um *link*!",
    error: "âŒ Ocorreu um erro!",
    banned: `ğŸš« VocÃª estÃ¡ banido!\n\nDigite ${global.prefa}owner para solicitar desbloqueio.`,
    bangc: "ğŸš« Este grupo estÃ¡ *banido*!",
    nonsfw: "ğŸ” Este grupo nÃ£o permite conteÃºdo NSFW!",
};
